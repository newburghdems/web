# **Town of Newburgh Democratic Committee Website**

This is the official website for the Town of Newburgh Democratic Committee. It is a static site generated by Jekyll, with dynamic components built using React. The site is designed to be a central hub for information about the committee, our candidates, local elected officials, and how to get involved in local politics.

## **Features**

* **Jekyll-powered:** Fast, secure static site generation.
* **React Components:** Interactive elements like the events calendar and social media feeds are powered by React.
* **Tailwind CSS:** Modern, utility-first CSS framework for rapid UI development.
* **Bilingual (i18n):** Full content translation in English and Spanish.
* **Data-Driven Content:** Committee members, candidates, and elected officials are managed via simple YAML data files.
* **Events Calendar:** Integrated with Google Calendar to display upcoming events.
* **Social Media Feed:** Dynamically pulls the latest posts from Bluesky.

## **Project Structure**

The repository is a standard Jekyll project with some additions for the React components and Tailwind CSS.

* \_data/: Contains YAML files that hold the site's data (e.g., candidates.yml, representatives.yml, committee\_members.yml, and i18n.yml for translations). This is the primary location for content updates.
* \_includes/: Reusable HTML components that are included in various layouts and pages.
* \_layouts/: Defines the main HTML structure for different types of pages (e.g., default.html, page.html).
* \_posts/: Blog posts.
* assets/: Contains all static assets.
    * css/: Compiled CSS.
    * js/dist/: Compiled React JavaScript bundles.
    * js/src/: React source code (JSX).
    * img/: Site images and logos.
* es/: Contains all the Spanish-language versions of the site's pages.
* \_config.yml: The main Jekyll configuration file.
* Gemfile: Manages Ruby dependencies (gems).
* package.json: Manages Node.js dependencies (for React and Tailwind).

## **Getting Started**

To get the project running on your local machine, you'll need to have Ruby, Bundler, and Node.js installed.

### **Prerequisites**

* **Ruby** (version specified in Gemfile)
* **Bundler:** gem install bundler
* **Node.js & npm:** [Download and install Node.js](https://nodejs.org/)

### **Installation**

1. **Clone the repository:**  
   git clone \[https://github.com/newburghdems/web.git\](https://github.com/newburghdems/web.git)  
   cd newburgh-dems-website

2. **Install Ruby dependencies:**  
   bundle install

3. **Install Node.js dependencies:**  
   npm install

## **Development**

To run the website locally for development, a foreman script is provided to start all necessary processes concurrently.  
./bin/dev

This command will:

1. Start the Jekyll server (jekyll serve).
2. Start the Tailwind CSS watcher to recompile CSS on changes.
3. Start the Babel watcher to recompile React JSX files on changes.

The site will be available at http://localhost:4000.

## **Content Management**

Most of the website's content can be updated without touching any HTML. The content is managed in the \_data directory.

### **Candidates, Officials, and Committee Members**

* **Candidates:** To add, update, or remove candidates, edit \_data/candidates.yml.
* **Elected Officials:** To update the list of current representatives, edit \_data/representatives.yml.
* **Committee Members:** To change the list of committee officers, edit \_data/committee\_members.yml.

### **Navigation**

The main site navigation is controlled by \_data/navigation.yml. You can add, remove, or reorder links here. Makes sure any updates done are applied to both desktop and mobile layouts.

## **Internationalization (i18n)**

The website is available in both English and Spanish. It's crucial to keep both versions in sync.

* **File Structure:** English pages are located in the root directory. Spanish pages are in the /es/ directory and must have the same file name as their English counterparts.
* **Text Snippets:** Reusable strings of text (like button labels, headers, etc.) are stored in \_data/i18n.yml. When adding a new piece of text to a template, you should add keys for both en and es here.
* **Making Changes:** If you update content on an English page, please ensure the corresponding Spanish page in the /es/ directory is also updated.

## **Styling**

The project uses Tailwind CSS for styling.

* The primary stylesheet is \_css/base.css, which imports Tailwind's base styles, components, and utilities.
* The build process, managed by the tailwind command in Procfile.dev, compiles \_css/base.css into assets/css/main.css.
* The configuration for Tailwind is located in tailwind.config.js.

## **Dynamic Components (React)**

Interactive parts of the site are built with React.

* **Source Code:** The React components (in JSX) are located in assets/js/src/.
* **Build Process:** The build:react script in package.json uses Babel to transpile the JSX files into standard JavaScript, which is then saved in assets/js/dist/.
* **Key Components:**
    * NextCommitteeMeeting.jsx: Fetches and displays the next committee meeting from the public Google Calendar.
    * UpcomingEvents.jsx: Fetches and displays other upcoming events.
    * BlueskyUpdates.jsx: Fetches and displays recent posts from the committee's Bluesky account.

## **Deployment**

Deployment is automated using **GitHub Actions**.

* **Trigger:** A new deployment is automatically triggered every time a commit is pushed to the main branch.
* **Process:** The workflow, defined in .github/workflows/deploy.yml, performs the following steps:
    1. Sets up the Ruby and Node.js environments.
    2. Installs all required dependencies.
    3. Builds the React assets and the Jekyll site for production.
    4. Securely deploys the contents of the generated \_site directory to the server using rsync over SSH.
* **Security:** All sensitive credentials (SSH key, host, user, port) are stored as encrypted **secrets** in the GitHub repository settings and are not exposed in the codebase.
* **Monitoring:** You can view the status and logs of deployments under the "Actions" tab of the GitHub repository.

This automated process replaces the old bin/deploy script, which should be removed from the project.

## **Contributing**

Contributions are welcome\! If you find a bug, have a suggestion, or want to add a feature, please open an issue or submit a pull request.
