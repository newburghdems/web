{"version":3,"file":"NextCommitteeMeeting.js","names":["React","useState","useEffect","Loader2","CalendarHeart","Calendar","Clock","MapPin","ical","NextCommitteeMeeting","calendarUrl","lang","setLang","translations","setTranslations","committeeMeeting","setCommitteeMeeting","loading","setLoading","error","setError","locale","formatDate","startDate","endDate","options","weekday","year","month","day","dateString","toLocaleDateString","isMultiDay","isSameDay","endOptions","Date","formatTime","isAllDay","all_day","hour","minute","hour12","timeString","toLocaleTimeString","isSameTime","date1","date2","d1","d2","getFullYear","getMonth","getDate","getTime","getHours","getMinutes","container","document","getElementById","pageLang","dataset","window","siteTranslations","home","upcoming_events","next_committee_meeting","next_committee_meeting_description","date","time","location","could_not_load_meeting","no_committee_meeting_scheduled","failed_to_fetch_ics","error_parsing_ics","no_title","no_calendar_url","Object","keys","length","fetchEvents","response","fetch","ok","Error","statusText","icsData","text","parsedCal","parseICS","now","foundCommitteeMeeting","events","k","hasOwnProperty","event","type","start","end","rrule","nextOccurrences","all","i","occ","occStartDate","duration","isAllDayEvent","datetype","push","uid","title","summary","description","sort","a","b","toLowerCase","includes","err","console","message","createElement","className","class","parts","split","map","p","trim","filter","streetAddress","remainingParts","slice","join","Fragment"],"sources":["../../src/components/NextCommitteeMeeting.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Loader2, CalendarHeart, Calendar, Clock, MapPin } from 'lucide-react';\nimport ical from 'ical';\n\nconst NextCommitteeMeeting = ({ calendarUrl }) => {\n  const [lang, setLang] = useState('en');\n  const [translations, setTranslations] = useState({});\n  const [committeeMeeting, setCommitteeMeeting] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Helper function to get the locale string\n  const locale = () => {\n    return `${lang}-US`;\n  }\n\n  // Helper function to format the date\n  const formatDate = (startDate, endDate) => {\n    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n    let dateString = startDate.toLocaleDateString(locale(), options);\n\n    // Check if it's a multi-day event or if the end date is on a different day\n    if (isMultiDay(startDate, endDate) || !isSameDay(startDate, endDate)) {\n      const endOptions = { year: 'numeric', month: 'long', day: 'numeric' };\n      dateString += ` - ${new Date(endDate).toLocaleDateString(locale(), endOptions)}`;\n    }\n    return dateString;\n  };\n\n  // Helper function to format the time\n  const formatTime = (startDate, endDate, isAllDay) => {\n    if (isAllDay) return translations.all_day || 'All Day'; // Use translation for \"All Day\"\n    const options = { hour: 'numeric', minute: 'numeric', hour12: true };\n    let timeString = startDate.toLocaleTimeString(locale(), options);\n    if (endDate && !isSameTime(startDate, endDate)) {\n      timeString += ` - ${new Date(endDate).toLocaleTimeString(locale(), options)}`;\n    }\n    return timeString;\n  };\n\n  // Helper function to check if two dates are on the same day\n  const isSameDay = (date1, date2) => {\n    const d1 = new Date(date1);\n    const d2 = new Date(date2);\n    return d1.getFullYear() === d2.getFullYear() &&\n      d1.getMonth() === d2.getMonth() &&\n      d1.getDate() === d2.getDate();\n  };\n\n  // Helper function to check if an event is multi-day\n  const isMultiDay = (date1, date2) => {\n    const d1 = new Date(date1);\n    const d2 = new Date(date2);\n    // If the event spans more than 24 hours (minus 1ms to handle exact 24h) and ends on a different day\n    return (d2.getTime() - d1.getTime()) > (24 * 60 * 60 * 1000 - 1) && !isSameDay(d1, d2);\n  };\n\n  // Helper function to check if two date-times have the same time\n  const isSameTime = (date1, date2) => {\n    const d1 = new Date(date1);\n    const d2 = new Date(date2);\n    return d1.getHours() === d2.getHours() && d1.getMinutes() === d2.getMinutes();\n  }\n\n  // Effect to set language and load translations\n  useEffect(() => {\n    // Attempt to get the language from the component's container data attribute\n    const container = document.getElementById('next-committee-meeting-react');\n    const pageLang = container?.dataset?.lang || 'en';\n    setLang(pageLang);\n\n    // Load translations from the global window object if available\n    if (window.siteTranslations && window.siteTranslations[pageLang] && window.siteTranslations[pageLang].home && window.siteTranslations[pageLang].home.upcoming_events) {\n      setTranslations(window.siteTranslations[pageLang].home.upcoming_events);\n    } else {\n      // Fallback translations if global ones are not found\n      setTranslations({\n        next_committee_meeting: \"Next Committee Meeting\",\n        next_committee_meeting_description: \"Join us for our regular committee meeting. Open to all registered Democrats in the Town of Newburgh. Your participation is vital!\",\n        date: \"Date\",\n        time: \"Time\",\n        location: \"Location\",\n        loading: \"Loading next meeting...\",\n        could_not_load_meeting: \"Could not load meeting information.\",\n        no_committee_meeting_scheduled: \"No committee meeting is currently scheduled. Please check back soon or view the full calendar.\",\n        all_day: \"All Day\",\n        failed_to_fetch_ics: \"Failed to fetch calendar data\",\n        error_parsing_ics: \"Error processing calendar data\",\n        no_title: \"Untitled Event\"\n      });\n    }\n  }, []); // Runs once on mount\n\n  // Effect to fetch and process event data\n  useEffect(() => {\n    if (!calendarUrl) {\n      setError(translations.no_calendar_url || \"Calendar URL not provided.\");\n      setLoading(false);\n      return;\n    }\n    if (Object.keys(translations).length === 0) { // Don't fetch until translations are loaded\n      return;\n    }\n\n    const fetchEvents = async () => {\n      setLoading(true);\n      try {\n        const response = await fetch(calendarUrl);\n        if (!response.ok) {\n          throw new Error(`${translations.failed_to_fetch_ics}: ${response.statusText}`);\n        }\n        const icsData = await response.text();\n        const parsedCal = ical.parseICS(icsData);\n\n        const now = new Date();\n        let foundCommitteeMeeting = null;\n\n        const events = [];\n        for (const k in parsedCal) {\n          if (parsedCal.hasOwnProperty(k)) {\n            const event = parsedCal[k];\n            if (event.type === 'VEVENT') {\n              let startDate = new Date(event.start);\n              let endDate = new Date(event.end || event.start);\n\n              // Handle recurring events: find the next occurrence after now\n              if (event.rrule) {\n                const rrule = event.rrule;\n                // Get a limited number of future occurrences to check\n                const nextOccurrences = rrule.all((date, i) => i < 20); // Check next 20\n\n                for (const occ of nextOccurrences) {\n                  const occStartDate = new Date(occ);\n                  if (occStartDate >= now) { // Found the first future occurrence\n                    startDate = occStartDate;\n                    const duration = new Date(event.end).getTime() - new Date(event.start).getTime();\n                    endDate = new Date(startDate.getTime() + duration);\n                    break;\n                  }\n                }\n              }\n\n              // Only consider events that are still upcoming or ongoing\n              // And ensure startDate is valid and in the future (or current if ongoing)\n              if (endDate >= now && startDate && startDate >= new Date(now.getFullYear(), now.getMonth(), now.getDate())) {\n                const isAllDayEvent = event.start.length === 8 || (event.datetype && event.datetype === 'date');\n                events.push({\n                  uid: event.uid,\n                  title: event.summary || translations.no_title,\n                  start: startDate,\n                  end: endDate,\n                  location: event.location || '',\n                  description: event.description || '',\n                  isAllDay: isAllDayEvent,\n                });\n              }\n            }\n          }\n        }\n\n        // Sort all potential events by start date\n        events.sort((a, b) => a.start - b.start);\n\n        // Find the first event titled \"committee meeting\"\n        for (const event of events) {\n          if (event.title.toLowerCase().includes('committee meeting')) {\n            foundCommitteeMeeting = event;\n            break; // Found the next one\n          }\n        }\n\n        setCommitteeMeeting(foundCommitteeMeeting);\n\n      } catch (err) {\n        console.error(`${translations.error_parsing_ics}:`, err);\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchEvents();\n  }, [calendarUrl, translations]); // Rerun if calendarUrl or translations change\n\n  // Render loading state\n  // Render loading state\n  if (loading) {\n    return (\n      <div className=\"rounded-lg shadow-xl overflow-hidden bg-white\">\n        <div className=\"p-6 sm:p-8 animate-pulse\"> {/* Added animate-pulse here */}\n          <div className=\"flex items-center mb-4\"> {/* Increased bottom margin */}\n            <CalendarHeart className=\"h-7 w-7 sm:h-8 sm:w-8 text-oc-orange-dark mr-3 flex-shrink-0\" />\n            <h3 className=\"font-merriweather text-xl sm:text-2xl font-bold text-dem-blue-700\">\n              {translations.next_committee_meeting}\n            </h3>\n          </div>\n          <p className=\"font-inter text-sm text-gray-700 mb-6 leading-relaxed\"> {/* Increased bottom margin */}\n            {translations.next_committee_meeting_description}\n          </p>\n          {/* Skeleton for Details (Date, Time, Location) */}\n          <div className=\"space-y-4\"> {/* [cite: 496] */}\n            <div className=\"flex items-start space-x-3\"> {/* Increased spacing */}\n              <Calendar className=\"h-5 w-5 text-dem-blue-500 flex-shrink-0 mt-1\" /> {/* Adjusted icon alignment */}\n              <div>\n                <p className=\"text-sm text-gray-700\">\n                  <strong className=\"font-semibold text-gray-800\">{translations.date}:</strong>\n                  <span className=\"ml-2 inline-block  bg-gray-300 rounded w-40\">&nbsp;</span> {/* Date value placeholder */}\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-start space-x-3\">\n              <Clock className=\"h-5 w-5 text-dem-blue-500 flex-shrink-0 mt-1\" />\n              <div>\n                <p className=\"text-sm text-gray-700\">\n                  <strong className=\"font-semibold text-gray-800\">{translations.time}:</strong>\n                  <span className=\"ml-2 inline-block bg-gray-300 rounded w-32\">&nbsp;</span> {/* Time value placeholder */}\n                </p>\n              </div>\n            </div>\n            {/* Location Skeleton */}\n            <div className=\"flex items-start space-x-3\">\n              <MapPin className=\"h-5 w-5 text-dem-blue-500 flex-shrink-0 mt-1\" />\n              <div class=\"flex-grow\">\n                <p className=\"w-full text-sm text-gray-700\">\n                  <div className=\"font-semibold text-gray-800\">{translations.location}:</div>\n                  <div className=\"bg-gray-300 rounded w-1/2 mb-1\">&nbsp;</div> {/* Location line 1 placeholder */}\n                  <div className=\"bg-gray-300 rounded w-1/4\">&nbsp;</div> {/* Location line 2 placeholder */}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Render error state\n  if (error) {\n    return (\n      <div className=\"rounded-lg shadow-xl overflow-hidden bg-white\">\n        <div className=\"p-6 sm:p-8 text-center\">\n          <p className=\"text-red-600 font-inter\">{translations.could_not_load_meeting}: {error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Render \"no meeting found\" state\n  if (!committeeMeeting) {\n    return (\n      <div className=\"rounded-lg shadow-xl overflow-hidden bg-white\">\n        <div className=\"p-6 sm:p-8\">\n          <div className=\"flex items-center mb-3\">\n            <CalendarHeart className=\"h-7 w-7 sm:h-8 sm:w-8 text-oc-orange-dark mr-3 flex-shrink-0\" />\n            <h3 className=\"font-merriweather text-xl sm:text-2xl font-bold text-dem-blue-700\">\n              {translations.next_committee_meeting}\n            </h3>\n          </div>\n          <p className=\"font-inter text-gray-600\">{translations.no_committee_meeting_scheduled}</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Render the committee meeting details\n  return (\n    <div className=\"rounded-lg shadow-xl overflow-hidden bg-white\">\n      <div className=\"p-6 sm:p-8\"> {/* Adjusted padding to match signup_form.html's inner div */}\n        <div className=\"flex items-center mb-4\"> {/* Increased bottom margin */}\n          <CalendarHeart className=\"h-7 w-7 sm:h-8 sm:w-8 text-oc-orange-dark mr-3 flex-shrink-0\" />\n          <h3 className=\"font-merriweather text-xl sm:text-2xl font-bold text-dem-blue-700\">\n            {translations.next_committee_meeting}\n          </h3>\n        </div>\n        <p className=\"font-inter text-sm text-gray-700 mb-6 leading-relaxed\"> {/* Increased bottom margin */}\n          {translations.next_committee_meeting_description}\n        </p>\n        <div className=\"space-y-4\"> {/* Increased spacing */}\n          <div className=\"flex items-start space-x-3\"> {/* Increased spacing */}\n            <Calendar className=\"h-5 w-5 text-dem-blue-500 flex-shrink-0 mt-1\" /> {/* Adjusted icon alignment */}\n            <div>\n              <p className=\"text-sm text-gray-700\">\n                <strong className=\"font-semibold text-gray-800\">{translations.date}:</strong> {formatDate(committeeMeeting.start, committeeMeeting.end)}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-start space-x-3\">\n            <Clock className=\"h-5 w-5 text-dem-blue-500 flex-shrink-0 mt-1\" />\n            <div>\n              <p className=\"text-sm text-gray-700\">\n                <strong className=\"font-semibold text-gray-800\">{translations.time}:</strong> {formatTime(committeeMeeting.start, committeeMeeting.end, committeeMeeting.isAllDay)}\n              </p>\n            </div>\n          </div>\n          {committeeMeeting.location && (\n            <div className=\"flex items-start space-x-3\">\n              <MapPin className=\"h-5 w-5 text-dem-blue-500 flex-shrink-0 mt-1\" />\n              <div>\n                <p className=\"text-sm text-gray-700\">\n                  <strong className=\"font-semibold text-gray-800\">{translations.location}:</strong><br />\n                  {committeeMeeting.location && (() => {\n                    // Split by comma or semicolon, then trim whitespace from each part and filter out any empty strings\n                    const parts = committeeMeeting.location.split(/[,;]/).map(p => p.trim()).filter(p => p.length > 0 && p !== 'USA');\n\n                    if (parts.length === 0) {\n                      return null; // Or some default text if preferred\n                    }\n\n                    // The first part is assumed to be the street address\n                    const streetAddress = parts[0];\n\n                    // The rest of the parts are city, state, zip, country\n                    // We'll join them back with a comma and a space\n                    const remainingParts = parts.slice(1).join(', ');\n\n                    return (\n                      <React.Fragment>\n                        {streetAddress}\n                        {remainingParts && <br />} {/* Add a line break only if there are remaining parts */}\n                        {remainingParts}\n                      </React.Fragment>\n                    );\n                  })()}\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default NextCommitteeMeeting;\n"],"mappings":"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","ignoreList":[]}