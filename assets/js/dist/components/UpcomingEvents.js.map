{"version":3,"file":"UpcomingEvents.js","names":["React","useState","useEffect","useMemo","Loader2","CalendarHeart","Calendar","Clock","MapPin","CalendarClock","CalendarPlus","ical","UpcomingEvents","calendarUrl","lang","setLang","translations","setTranslations","otherEvents","setOtherEvents","loading","setLoading","error","setError","locale","eventsPagePath","formatDate","startDate","endDate","options","weekday","year","month","day","dateString","toLocaleDateString","isMultiDay","isSameDay","endOptions","Date","formatTime","isAllDay","hour","minute","hour12","timeString","toLocaleTimeString","isSameTime","formatDateTimeForOtherEvents","dateOptions","dateTimeString","timeOptions","date1","date2","d1","d2","getFullYear","getMonth","getDate","getTime","getHours","getMinutes","container","document","getElementById","pageLang","dataset","window","siteTranslations","home","upcoming_events","no_calendar_url","fetchEvents","response","fetch","ok","Error","failed_to_fetch_ics","statusText","icsData","text","parsedCal","parseICS","now","events","k","hasOwnProperty","event","type","start","end","rrule","nextOccurrences","all","date","i","occ","originalStartDate","occurrenceDate","getSeconds","duration","isAllDayEvent","length","datetype","push","uid","title","summary","no_title","location","description","sort","a","b","upcomingOtherEvents","err","console","error_parsing_ics","message","createElement","className","could_not_load_events","no_upcoming_events","href","view_full_calendar","also_coming_up","map","index","key","view_all_events"],"sources":["../../src/components/UpcomingEvents.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { Loader2, CalendarHeart, Calendar, Clock, MapPin, CalendarClock, CalendarPlus } from 'lucide-react';\nimport ical from 'ical';\n\nconst UpcomingEvents = ({ calendarUrl }) => {\n  const [lang, setLang] = useState('en');\n  const [translations, setTranslations] = useState({});\n  const [otherEvents, setOtherEvents] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const locale = () => {\n    return `${lang}-US`;\n  }\n\n  const eventsPagePath = () => {\n    if (lang === 'es') {\n      return '/es/events';\n    }\n\n    return '/events';\n  }\n\n  const formatDate = (startDate, endDate) => {\n    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n    let dateString = startDate.toLocaleDateString(locale(), options);\n\n    if (isMultiDay(startDate, endDate) || !isSameDay(startDate, endDate)) {\n      // For multi-day events, or if end date is significantly different and on a different day\n      const endOptions = { year: 'numeric', month: 'long', day: 'numeric' };\n      dateString += ` - ${new Date(endDate).toLocaleDateString(locale(), endOptions)}`;\n    }\n    return dateString;\n  };\n\n  const formatTime = (startDate, endDate, isAllDay) => {\n    if (isAllDay) return 'All Day';\n    const options = { hour: 'numeric', minute: 'numeric', hour12: true };\n    let timeString = startDate.toLocaleTimeString(locale(), options);\n    if (endDate && !isSameTime(startDate, endDate)) {\n      timeString += ` - ${new Date(endDate).toLocaleTimeString(locale(), options)}`;\n    }\n    return timeString;\n  };\n\n  const formatDateTimeForOtherEvents = (startDate, isAllDay) => {\n    const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n    let dateTimeString = new Date(startDate).toLocaleDateString(locale(), dateOptions);\n    if (!isAllDay) {\n      const timeOptions = { hour: 'numeric', minute: 'numeric', hour12: true };\n      dateTimeString += ` - ${new Date(startDate).toLocaleTimeString(locale(), timeOptions)}`;\n    }\n    return dateTimeString;\n  }\n\n  const isSameDay = (date1, date2) => {\n    const d1 = new Date(date1);\n    const d2 = new Date(date2);\n    return d1.getFullYear() === d2.getFullYear() &&\n      d1.getMonth() === d2.getMonth() &&\n      d1.getDate() === d2.getDate();\n  };\n\n  const isMultiDay = (date1, date2) => {\n    const d1 = new Date(date1);\n    const d2 = new Date(date2);\n    // If the event spans more than 24 hours, or ends on a different day\n    return (d2.getTime() - d1.getTime()) > (24 * 60 * 60 * 1000 - 1) && !isSameDay(d1, d2);\n  };\n\n  const isSameTime = (date1, date2) => {\n    const d1 = new Date(date1);\n    const d2 = new Date(date2);\n    return d1.getHours() === d2.getHours() && d1.getMinutes() === d2.getMinutes();\n  }\n\n  useEffect(() => {\n    const container = document.getElementById('upcoming-events-react');\n    const pageLang = container?.dataset?.lang || 'en';\n    setLang(pageLang);\n\n    if (window.siteTranslations && window.siteTranslations[pageLang]) {\n      setTranslations(window.siteTranslations[pageLang].home.upcoming_events);\n    }\n\n    if (!calendarUrl) {\n      setError(translations.no_calendar_url);\n      setLoading(false);\n      return;\n    }\n\n    const fetchEvents = async () => {\n      try {\n        const response = await fetch(calendarUrl);\n        if (!response.ok) {\n          throw new Error(`${translations.failed_to_fetch_ics}: ${response.statusText}`);\n        }\n        const icsData = await response.text();\n        const parsedCal = ical.parseICS(icsData);\n\n        const now = new Date();\n        const events = [];\n\n        for (const k in parsedCal) {\n          if (parsedCal.hasOwnProperty(k)) {\n            const event = parsedCal[k];\n            if (event.type === 'VEVENT') {\n              let startDate = new Date(event.start);\n              let endDate = new Date(event.end || event.start);\n\n              // Handle recurring events: find the next occurrence\n              if (event.rrule) {\n                const rrule = event.rrule;\n                const nextOccurrences = rrule.all((date, i) => i < 10); // Get next 10 occurrences\n\n                for (const occ of nextOccurrences) {\n                  if (occ >= now) {\n                    // Reconstruct the date to ensure the time is correct, compensating for potential DST issues in the ical library.\n                    const originalStartDate = new Date(event.start);\n                    const occurrenceDate = new Date(occ);\n\n                    startDate = new Date(\n                      occurrenceDate.getFullYear(),\n                      occurrenceDate.getMonth(),\n                      occurrenceDate.getDate(),\n                      originalStartDate.getHours(),\n                      originalStartDate.getMinutes(),\n                      originalStartDate.getSeconds()\n                    );\n\n                    const duration = new Date(event.end).getTime() - new Date(event.start).getTime();\n                    endDate = new Date(startDate.getTime() + duration);\n                    break; // Use the first future occurrence\n                  }\n                }\n              }\n\n              // Only consider events that are still upcoming or ongoing\n              if (endDate >= now) {\n                const isAllDayEvent = event.start.length === 8 || (event.datetype && event.datetype === 'date');\n\n                events.push({\n                  uid: event.uid,\n                  title: event.summary || translations.no_title,\n                  start: startDate,\n                  end: endDate,\n                  location: event.location || '',\n                  description: event.description || '',\n                  isAllDay: isAllDayEvent,\n                });\n              }\n            }\n          }\n        }\n\n        events.sort((a, b) => a.start - b.start);\n\n        const upcomingOtherEvents = [];\n\n        for (const event of events) {\n          if (upcomingOtherEvents.length < 4) {\n            upcomingOtherEvents.push(event);\n          }\n          if (upcomingOtherEvents.length >= 4) break;\n        }\n\n        setOtherEvents(upcomingOtherEvents);\n\n      } catch (err) {\n        console.error(`${translations.error_parsing_ics}:`, err);\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchEvents();\n  }, [calendarUrl]);\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 text-center py-10\">\n        <Loader2 className=\"h-12 w-12 animate-spin text-dem-blue-500 mx-auto\" />\n        <p className=\"mt-2 text-gray-600\">{translations.loading}</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 text-center py-10\">\n        <p className=\"text-red-500\">{translations.could_not_load_events}: {error}</p>\n      </div>\n    );\n  }\n\n  if (otherEvents.length === 0) {\n    return (\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 text-center py-10\">\n        <p className=\"text-gray-600\">{translations.no_upcoming_events}</p>\n        <div className=\"text-center mt-12 sm:mt-16\">\n          <a href=\"{eventsPagePath()}\" className=\"inline-flex items-center bg-dem-blue-500 hover:bg-dem-blue-600 text-white font-semibold py-3 px-7 rounded-md text-lg transition-colors duration-300 shadow hover:shadow-md group\">\n            <CalendarPlus className=\"h-5 w-5 mr-2 transform transition-transform duration-200 group-hover:scale-110\" />\n            {translations.view_full_calendar}\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"mt-8 md:mt-0\">\n        <h3 className=\"font-merriweather text-2xl sm:text-3xl font-semibold text-dem-blue-600 mb-4\">{translations.also_coming_up}</h3>\n        {otherEvents.length > 0 ? (\n          <div className=\"grid grid-flow-col md:grid-rows-2 md:gap-6\">\n            {otherEvents.map((event, index) => (\n              <div key={event.uid || index} className=\"border-b border-gray-200 pb-3.5\">\n                <h4 className=\"font-inter text-base font-semibold text-dem-blue-500 mb-1\">{event.title}</h4>\n                <p className=\"text-xs text-gray-600 flex items-center\">\n                  <CalendarClock className=\"h-3.5 w-3.5 mr-1.5 text-gray-400 flex-shrink-0\" />\n                  {formatDateTimeForOtherEvents(event.start, event.isAllDay)}\n                </p>\n                {event.location && <p className=\"text-xs text-gray-500 mt-1 ml-5\">{event.location}</p>}\n              </div>\n            ))}\n          </div>\n        ) : (\n          <p className=\"font-inter text-gray-600\">{translations.also_coming_up}</p>\n        )}\n      </div>\n\n      <div className=\"mt-6\">\n        <a href={eventsPagePath()} className=\"inline-flex items-center bg-dem-blue-500 hover:bg-dem-blue-600 text-white font-semibold py-3 px-7 rounded-md text-lg transition-colors duration-300 shadow hover:shadow-md group\">\n          <CalendarPlus className=\"h-5 w-5 mr-2 transform transition-transform duration-200 group-hover:scale-110\" />\n          {translations.view_all_events}\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default UpcomingEvents;\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AAC3D,SAASC,OAAO,EAAEC,aAAa,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,MAAM,EAAEC,aAAa,EAAEC,YAAY,QAAQ,cAAc;AAC3G,OAAOC,IAAI,MAAM,MAAM;AAEvB,MAAMC,cAAc,GAAGA,CAAC;EAAEC;AAAY,CAAC,KAAK;EAC1C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACe,YAAY,EAAEC,eAAe,CAAC,GAAGhB,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpD,MAAM,CAACiB,WAAW,EAAEC,cAAc,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACmB,OAAO,EAAEC,UAAU,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACqB,KAAK,EAAEC,QAAQ,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMuB,MAAM,GAAGA,CAAA,KAAM;IACnB,OAAO,GAAGV,IAAI,KAAK;EACrB,CAAC;EAED,MAAMW,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAIX,IAAI,KAAK,IAAI,EAAE;MACjB,OAAO,YAAY;IACrB;IAEA,OAAO,SAAS;EAClB,CAAC;EAED,MAAMY,UAAU,GAAGA,CAACC,SAAS,EAAEC,OAAO,KAAK;IACzC,MAAMC,OAAO,GAAG;MAAEC,OAAO,EAAE,MAAM;MAAEC,IAAI,EAAE,SAAS;MAAEC,KAAK,EAAE,MAAM;MAAEC,GAAG,EAAE;IAAU,CAAC;IACnF,IAAIC,UAAU,GAAGP,SAAS,CAACQ,kBAAkB,CAACX,MAAM,CAAC,CAAC,EAAEK,OAAO,CAAC;IAEhE,IAAIO,UAAU,CAACT,SAAS,EAAEC,OAAO,CAAC,IAAI,CAACS,SAAS,CAACV,SAAS,EAAEC,OAAO,CAAC,EAAE;MACpE;MACA,MAAMU,UAAU,GAAG;QAAEP,IAAI,EAAE,SAAS;QAAEC,KAAK,EAAE,MAAM;QAAEC,GAAG,EAAE;MAAU,CAAC;MACrEC,UAAU,IAAI,MAAM,IAAIK,IAAI,CAACX,OAAO,CAAC,CAACO,kBAAkB,CAACX,MAAM,CAAC,CAAC,EAAEc,UAAU,CAAC,EAAE;IAClF;IACA,OAAOJ,UAAU;EACnB,CAAC;EAED,MAAMM,UAAU,GAAGA,CAACb,SAAS,EAAEC,OAAO,EAAEa,QAAQ,KAAK;IACnD,IAAIA,QAAQ,EAAE,OAAO,SAAS;IAC9B,MAAMZ,OAAO,GAAG;MAAEa,IAAI,EAAE,SAAS;MAAEC,MAAM,EAAE,SAAS;MAAEC,MAAM,EAAE;IAAK,CAAC;IACpE,IAAIC,UAAU,GAAGlB,SAAS,CAACmB,kBAAkB,CAACtB,MAAM,CAAC,CAAC,EAAEK,OAAO,CAAC;IAChE,IAAID,OAAO,IAAI,CAACmB,UAAU,CAACpB,SAAS,EAAEC,OAAO,CAAC,EAAE;MAC9CiB,UAAU,IAAI,MAAM,IAAIN,IAAI,CAACX,OAAO,CAAC,CAACkB,kBAAkB,CAACtB,MAAM,CAAC,CAAC,EAAEK,OAAO,CAAC,EAAE;IAC/E;IACA,OAAOgB,UAAU;EACnB,CAAC;EAED,MAAMG,4BAA4B,GAAGA,CAACrB,SAAS,EAAEc,QAAQ,KAAK;IAC5D,MAAMQ,WAAW,GAAG;MAAEnB,OAAO,EAAE,MAAM;MAAEC,IAAI,EAAE,SAAS;MAAEC,KAAK,EAAE,MAAM;MAAEC,GAAG,EAAE;IAAU,CAAC;IACvF,IAAIiB,cAAc,GAAG,IAAIX,IAAI,CAACZ,SAAS,CAAC,CAACQ,kBAAkB,CAACX,MAAM,CAAC,CAAC,EAAEyB,WAAW,CAAC;IAClF,IAAI,CAACR,QAAQ,EAAE;MACb,MAAMU,WAAW,GAAG;QAAET,IAAI,EAAE,SAAS;QAAEC,MAAM,EAAE,SAAS;QAAEC,MAAM,EAAE;MAAK,CAAC;MACxEM,cAAc,IAAI,MAAM,IAAIX,IAAI,CAACZ,SAAS,CAAC,CAACmB,kBAAkB,CAACtB,MAAM,CAAC,CAAC,EAAE2B,WAAW,CAAC,EAAE;IACzF;IACA,OAAOD,cAAc;EACvB,CAAC;EAED,MAAMb,SAAS,GAAGA,CAACe,KAAK,EAAEC,KAAK,KAAK;IAClC,MAAMC,EAAE,GAAG,IAAIf,IAAI,CAACa,KAAK,CAAC;IAC1B,MAAMG,EAAE,GAAG,IAAIhB,IAAI,CAACc,KAAK,CAAC;IAC1B,OAAOC,EAAE,CAACE,WAAW,CAAC,CAAC,KAAKD,EAAE,CAACC,WAAW,CAAC,CAAC,IAC1CF,EAAE,CAACG,QAAQ,CAAC,CAAC,KAAKF,EAAE,CAACE,QAAQ,CAAC,CAAC,IAC/BH,EAAE,CAACI,OAAO,CAAC,CAAC,KAAKH,EAAE,CAACG,OAAO,CAAC,CAAC;EACjC,CAAC;EAED,MAAMtB,UAAU,GAAGA,CAACgB,KAAK,EAAEC,KAAK,KAAK;IACnC,MAAMC,EAAE,GAAG,IAAIf,IAAI,CAACa,KAAK,CAAC;IAC1B,MAAMG,EAAE,GAAG,IAAIhB,IAAI,CAACc,KAAK,CAAC;IAC1B;IACA,OAAQE,EAAE,CAACI,OAAO,CAAC,CAAC,GAAGL,EAAE,CAACK,OAAO,CAAC,CAAC,GAAK,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,GAAG,CAAE,IAAI,CAACtB,SAAS,CAACiB,EAAE,EAAEC,EAAE,CAAC;EACxF,CAAC;EAED,MAAMR,UAAU,GAAGA,CAACK,KAAK,EAAEC,KAAK,KAAK;IACnC,MAAMC,EAAE,GAAG,IAAIf,IAAI,CAACa,KAAK,CAAC;IAC1B,MAAMG,EAAE,GAAG,IAAIhB,IAAI,CAACc,KAAK,CAAC;IAC1B,OAAOC,EAAE,CAACM,QAAQ,CAAC,CAAC,KAAKL,EAAE,CAACK,QAAQ,CAAC,CAAC,IAAIN,EAAE,CAACO,UAAU,CAAC,CAAC,KAAKN,EAAE,CAACM,UAAU,CAAC,CAAC;EAC/E,CAAC;EAED3D,SAAS,CAAC,MAAM;IACd,MAAM4D,SAAS,GAAGC,QAAQ,CAACC,cAAc,CAAC,uBAAuB,CAAC;IAClE,MAAMC,QAAQ,GAAGH,SAAS,EAAEI,OAAO,EAAEpD,IAAI,IAAI,IAAI;IACjDC,OAAO,CAACkD,QAAQ,CAAC;IAEjB,IAAIE,MAAM,CAACC,gBAAgB,IAAID,MAAM,CAACC,gBAAgB,CAACH,QAAQ,CAAC,EAAE;MAChEhD,eAAe,CAACkD,MAAM,CAACC,gBAAgB,CAACH,QAAQ,CAAC,CAACI,IAAI,CAACC,eAAe,CAAC;IACzE;IAEA,IAAI,CAACzD,WAAW,EAAE;MAChBU,QAAQ,CAACP,YAAY,CAACuD,eAAe,CAAC;MACtClD,UAAU,CAAC,KAAK,CAAC;MACjB;IACF;IAEA,MAAMmD,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC7D,WAAW,CAAC;QACzC,IAAI,CAAC4D,QAAQ,CAACE,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,GAAG5D,YAAY,CAAC6D,mBAAmB,KAAKJ,QAAQ,CAACK,UAAU,EAAE,CAAC;QAChF;QACA,MAAMC,OAAO,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;QACrC,MAAMC,SAAS,GAAGtE,IAAI,CAACuE,QAAQ,CAACH,OAAO,CAAC;QAExC,MAAMI,GAAG,GAAG,IAAI5C,IAAI,CAAC,CAAC;QACtB,MAAM6C,MAAM,GAAG,EAAE;QAEjB,KAAK,MAAMC,CAAC,IAAIJ,SAAS,EAAE;UACzB,IAAIA,SAAS,CAACK,cAAc,CAACD,CAAC,CAAC,EAAE;YAC/B,MAAME,KAAK,GAAGN,SAAS,CAACI,CAAC,CAAC;YAC1B,IAAIE,KAAK,CAACC,IAAI,KAAK,QAAQ,EAAE;cAC3B,IAAI7D,SAAS,GAAG,IAAIY,IAAI,CAACgD,KAAK,CAACE,KAAK,CAAC;cACrC,IAAI7D,OAAO,GAAG,IAAIW,IAAI,CAACgD,KAAK,CAACG,GAAG,IAAIH,KAAK,CAACE,KAAK,CAAC;;cAEhD;cACA,IAAIF,KAAK,CAACI,KAAK,EAAE;gBACf,MAAMA,KAAK,GAAGJ,KAAK,CAACI,KAAK;gBACzB,MAAMC,eAAe,GAAGD,KAAK,CAACE,GAAG,CAAC,CAACC,IAAI,EAAEC,CAAC,KAAKA,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;;gBAExD,KAAK,MAAMC,GAAG,IAAIJ,eAAe,EAAE;kBACjC,IAAII,GAAG,IAAIb,GAAG,EAAE;oBACd;oBACA,MAAMc,iBAAiB,GAAG,IAAI1D,IAAI,CAACgD,KAAK,CAACE,KAAK,CAAC;oBAC/C,MAAMS,cAAc,GAAG,IAAI3D,IAAI,CAACyD,GAAG,CAAC;oBAEpCrE,SAAS,GAAG,IAAIY,IAAI,CAClB2D,cAAc,CAAC1C,WAAW,CAAC,CAAC,EAC5B0C,cAAc,CAACzC,QAAQ,CAAC,CAAC,EACzByC,cAAc,CAACxC,OAAO,CAAC,CAAC,EACxBuC,iBAAiB,CAACrC,QAAQ,CAAC,CAAC,EAC5BqC,iBAAiB,CAACpC,UAAU,CAAC,CAAC,EAC9BoC,iBAAiB,CAACE,UAAU,CAAC,CAC/B,CAAC;oBAED,MAAMC,QAAQ,GAAG,IAAI7D,IAAI,CAACgD,KAAK,CAACG,GAAG,CAAC,CAAC/B,OAAO,CAAC,CAAC,GAAG,IAAIpB,IAAI,CAACgD,KAAK,CAACE,KAAK,CAAC,CAAC9B,OAAO,CAAC,CAAC;oBAChF/B,OAAO,GAAG,IAAIW,IAAI,CAACZ,SAAS,CAACgC,OAAO,CAAC,CAAC,GAAGyC,QAAQ,CAAC;oBAClD,MAAM,CAAC;kBACT;gBACF;cACF;;cAEA;cACA,IAAIxE,OAAO,IAAIuD,GAAG,EAAE;gBAClB,MAAMkB,aAAa,GAAGd,KAAK,CAACE,KAAK,CAACa,MAAM,KAAK,CAAC,IAAKf,KAAK,CAACgB,QAAQ,IAAIhB,KAAK,CAACgB,QAAQ,KAAK,MAAO;gBAE/FnB,MAAM,CAACoB,IAAI,CAAC;kBACVC,GAAG,EAAElB,KAAK,CAACkB,GAAG;kBACdC,KAAK,EAAEnB,KAAK,CAACoB,OAAO,IAAI3F,YAAY,CAAC4F,QAAQ;kBAC7CnB,KAAK,EAAE9D,SAAS;kBAChB+D,GAAG,EAAE9D,OAAO;kBACZiF,QAAQ,EAAEtB,KAAK,CAACsB,QAAQ,IAAI,EAAE;kBAC9BC,WAAW,EAAEvB,KAAK,CAACuB,WAAW,IAAI,EAAE;kBACpCrE,QAAQ,EAAE4D;gBACZ,CAAC,CAAC;cACJ;YACF;UACF;QACF;QAEAjB,MAAM,CAAC2B,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACvB,KAAK,GAAGwB,CAAC,CAACxB,KAAK,CAAC;QAExC,MAAMyB,mBAAmB,GAAG,EAAE;QAE9B,KAAK,MAAM3B,KAAK,IAAIH,MAAM,EAAE;UAC1B,IAAI8B,mBAAmB,CAACZ,MAAM,GAAG,CAAC,EAAE;YAClCY,mBAAmB,CAACV,IAAI,CAACjB,KAAK,CAAC;UACjC;UACA,IAAI2B,mBAAmB,CAACZ,MAAM,IAAI,CAAC,EAAE;QACvC;QAEAnF,cAAc,CAAC+F,mBAAmB,CAAC;MAErC,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAAC9F,KAAK,CAAC,GAAGN,YAAY,CAACqG,iBAAiB,GAAG,EAAEF,GAAG,CAAC;QACxD5F,QAAQ,CAAC4F,GAAG,CAACG,OAAO,CAAC;MACvB,CAAC,SAAS;QACRjG,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDmD,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,CAAC3D,WAAW,CAAC,CAAC;EAEjB,IAAIO,OAAO,EAAE;IACX,oBACEpB,KAAA,CAAAuH,aAAA;MAAKC,SAAS,EAAC;IAA0D,gBACvExH,KAAA,CAAAuH,aAAA,CAACnH,OAAO;MAACoH,SAAS,EAAC;IAAkD,CAAE,CAAC,eACxExH,KAAA,CAAAuH,aAAA;MAAGC,SAAS,EAAC;IAAoB,GAAExG,YAAY,CAACI,OAAW,CACxD,CAAC;EAEV;EAEA,IAAIE,KAAK,EAAE;IACT,oBACEtB,KAAA,CAAAuH,aAAA;MAAKC,SAAS,EAAC;IAA0D,gBACvExH,KAAA,CAAAuH,aAAA;MAAGC,SAAS,EAAC;IAAc,GAAExG,YAAY,CAACyG,qBAAqB,EAAC,IAAE,EAACnG,KAAS,CACzE,CAAC;EAEV;EAEA,IAAIJ,WAAW,CAACoF,MAAM,KAAK,CAAC,EAAE;IAC5B,oBACEtG,KAAA,CAAAuH,aAAA;MAAKC,SAAS,EAAC;IAA0D,gBACvExH,KAAA,CAAAuH,aAAA;MAAGC,SAAS,EAAC;IAAe,GAAExG,YAAY,CAAC0G,kBAAsB,CAAC,eAClE1H,KAAA,CAAAuH,aAAA;MAAKC,SAAS,EAAC;IAA4B,gBACzCxH,KAAA,CAAAuH,aAAA;MAAGI,IAAI,EAAC,oBAAoB;MAACH,SAAS,EAAC;IAAkL,gBACvNxH,KAAA,CAAAuH,aAAA,CAAC7G,YAAY;MAAC8G,SAAS,EAAC;IAAgF,CAAE,CAAC,EAC1GxG,YAAY,CAAC4G,kBACb,CACA,CACF,CAAC;EAEV;EAEA,oBACE5H,KAAA,CAAAuH,aAAA,2BACEvH,KAAA,CAAAuH,aAAA;IAAKC,SAAS,EAAC;EAAc,gBAC3BxH,KAAA,CAAAuH,aAAA;IAAIC,SAAS,EAAC;EAA6E,GAAExG,YAAY,CAAC6G,cAAmB,CAAC,EAC7H3G,WAAW,CAACoF,MAAM,GAAG,CAAC,gBACrBtG,KAAA,CAAAuH,aAAA;IAAKC,SAAS,EAAC;EAA4C,GACxDtG,WAAW,CAAC4G,GAAG,CAAC,CAACvC,KAAK,EAAEwC,KAAK,kBAC5B/H,KAAA,CAAAuH,aAAA;IAAKS,GAAG,EAAEzC,KAAK,CAACkB,GAAG,IAAIsB,KAAM;IAACP,SAAS,EAAC;EAAiC,gBACvExH,KAAA,CAAAuH,aAAA;IAAIC,SAAS,EAAC;EAA2D,GAAEjC,KAAK,CAACmB,KAAU,CAAC,eAC5F1G,KAAA,CAAAuH,aAAA;IAAGC,SAAS,EAAC;EAAyC,gBACpDxH,KAAA,CAAAuH,aAAA,CAAC9G,aAAa;IAAC+G,SAAS,EAAC;EAAgD,CAAE,CAAC,EAC3ExE,4BAA4B,CAACuC,KAAK,CAACE,KAAK,EAAEF,KAAK,CAAC9C,QAAQ,CACxD,CAAC,EACH8C,KAAK,CAACsB,QAAQ,iBAAI7G,KAAA,CAAAuH,aAAA;IAAGC,SAAS,EAAC;EAAiC,GAAEjC,KAAK,CAACsB,QAAY,CAClF,CACN,CACE,CAAC,gBAEN7G,KAAA,CAAAuH,aAAA;IAAGC,SAAS,EAAC;EAA0B,GAAExG,YAAY,CAAC6G,cAAkB,CAEvE,CAAC,eAEN7H,KAAA,CAAAuH,aAAA;IAAKC,SAAS,EAAC;EAAM,gBACnBxH,KAAA,CAAAuH,aAAA;IAAGI,IAAI,EAAElG,cAAc,CAAC,CAAE;IAAC+F,SAAS,EAAC;EAAkL,gBACrNxH,KAAA,CAAAuH,aAAA,CAAC7G,YAAY;IAAC8G,SAAS,EAAC;EAAgF,CAAE,CAAC,EAC1GxG,YAAY,CAACiH,eACb,CACA,CACF,CAAC;AAEV,CAAC;AAED,eAAerH,cAAc","ignoreList":[]}